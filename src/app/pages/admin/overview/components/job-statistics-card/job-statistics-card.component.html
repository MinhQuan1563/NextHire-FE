<app-statistic-card
  title="Job Statistics"
  icon="pi pi-briefcase"
  iconColor="text-green-500"
  iconBackground="bg-green-100"
  [state]="cardState()"
  [errorMessage]="errorMessage() || 'Failed to load job statistics'"
  emptyMessage="No job data available for the selected time range"
  (retry)="onRetry()"
>
  <div class="job-statistics-content" *ngIf="statisticsData()">
    <div class="metrics-grid grid grid-cols-2 gap-4 mb-6">
      <div class="metric-item">
        <div class="flex items-center justify-between">
          <span class="text-sm text-gray-500">Total Jobs</span>
        </div>
        <p class="text-3xl font-bold text-gray-800 mt-1">
          {{ statisticsData()!.totalJobs | number }}
        </p>
      </div>

      <div class="metric-item">
        <div class="flex items-center justify-between">
          <span class="text-sm text-gray-500">Active Jobs</span>
        </div>
        <p class="text-3xl font-bold text-green-600 mt-1">
          {{ statisticsData()!.activeJobs | number }}
        </p>
        <p class="text-xs text-gray-400 mt-1">
          {{ activeJobsPercentage() | number:'1.1-1' }}% of total
        </p>
      </div>

      <div class="metric-item">
        <div class="flex items-center justify-between">
          <span class="text-sm text-gray-500">Closed Jobs</span>
        </div>
        <p class="text-2xl font-semibold text-gray-700 mt-1">
          {{ statisticsData()!.closedJobs | number }}
        </p>
      </div>

      <div class="metric-item">
        <div class="flex items-center justify-between">
          <span class="text-sm text-gray-500">Avg Applications</span>
        </div>
        <p class="text-2xl font-semibold text-blue-600 mt-1">
          {{ statisticsData()!.averageApplicationsPerJob | number:'1.1-1' }}
        </p>
      </div>

      <div class="metric-item">
        <div class="flex items-center justify-between">
          <span class="text-sm text-gray-500">Posted Today</span>
        </div>
        <p class="text-xl font-semibold text-gray-700 mt-1">
          {{ statisticsData()!.jobsPostedToday | number }}
        </p>
      </div>

      <div class="metric-item">
        <div class="flex items-center justify-between">
          <span class="text-sm text-gray-500">Posted This Week</span>
        </div>
        <p class="text-xl font-semibold text-gray-700 mt-1">
          {{ statisticsData()!.jobsPostedThisWeek | number }}
        </p>
      </div>

      <div class="metric-item col-span-2">
        <div class="flex items-center justify-between">
          <span class="text-sm text-gray-500">Posted This Month</span>
        </div>
        <p class="text-xl font-semibold text-gray-700 mt-1">
          {{ statisticsData()!.jobsPostedThisMonth | number }}
        </p>
      </div>
    </div>

    <div class="charts-section space-y-6">
      <div class="trend-chart" *ngIf="trendChartData()">
        <h4 class="text-sm font-medium text-gray-700 mb-3">Job Posting Trend</h4>
        <app-line-chart
          [data]="trendChartData()"
          [color]="'#10B981'"
          [height]="'200px'"
          [showLegend]="false"
          [showGrid]="true"
        ></app-line-chart>
      </div>

      <div class="distribution-charts grid grid-cols-1 lg:grid-cols-2 gap-4">
        <div class="industry-chart" *ngIf="industryChartData()">
          <h4 class="text-sm font-medium text-gray-700 mb-3">Jobs by Industry</h4>
          <app-donut-chart
            [data]="industryChartData()"
            [height]="'250px'"
            [showLegend]="true"
            [showPercentage]="true"
          ></app-donut-chart>
        </div>

        <div class="type-chart" *ngIf="typeChartData()">
          <h4 class="text-sm font-medium text-gray-700 mb-3">Jobs by Type</h4>
          <app-bar-chart
            [data]="typeChartData()"
            [height]="'250px'"
            [showLegend]="false"
            [showGrid]="true"
          ></app-bar-chart>
        </div>
      </div>

      <div class="no-chart-message" *ngIf="!trendChartData() && !industryChartData() && !typeChartData()">
        <p class="text-sm text-gray-400 text-center py-8">
          No chart data available
        </p>
      </div>
    </div>
  </div>
</app-statistic-card>
